<div class="studentinfo">
    <div class="inner-wrapper">
    	<loading ng-show="isCertificationLoading">證書產生中</loading>
        <div class="manage" ng-show="!isCertificationLoading">
            <div class="fix-content">
                <div class="top-nav">
                    <a class="nav" ng-click="goCourseManage()">課程管理</a>
                    <span class="glyphicon glyphicon-menu-right"></span>
                    <span>{{courseId}}</span>
                </div>
                <div class="manage-topbar">
                    <div class="btn-group" role="group" aria-label="...">
                        <button type="button" class="btn btn-default" ng-click="selectStudents()" ng-class="{'disabled': isStudentLoading}">
                            <div class="select-block">
                                <span class="glyphicon glyphicon-minus" ng-show="getSelectedStudent().length != studentList.length && getSelectedStudent().length != 0"></span>
                                <span class="glyphicon glyphicon-ok" ng-show="getSelectedStudent().length == studentList.length && !isStudentLoading"></span>
                            </div>
                        </button>
                        <button type="button" class="btn btn-default" ng-class="{'disabled': getSelectedStudent().length == 0}" ng-click="sendMailData()">寄送證書</button>
                        <button type="button" class="btn btn-default" ng-class="{'disabled': getSelectedStudent().length == 0}" ng-click="openInvoiceModal()" data-toggle="modal" data-target="#invoice-modal">產生發票</button>
                        <button type="button" class="btn btn-default" ng-class="{'disabled': getSelectedStudent().length == 0}">刪除學員</button>
                    </div>
                    <span class="select-info">已選取 {{getSelectedStudent().length}} 名學員</span>
                    <div class="student-search">
                        <div class="input-group">
                              <input type="text" class="form-control" placeholder="學員搜尋" ng-model="searchName">
                              <div class="input-group-addon">
                                  <span class="glyphicon glyphicon-search"></span>
                              </div>
                        </div>
                    </div>
                </div>
            </div>
                
            <loading ng-show="isStudentLoading"></loading>
            <div class="manage-content" ng-show="!isStudentLoading">
                <div class="course-content">
                    <div class="content-title">課程資訊</div>
                    <div class="content-info">
                        <div class="left">
                            <div class="form-group">
                                <label>課程名稱：</label>
                                <span>{{course.courseName_}}</span>
                            </div>
                            <div class="form-group">
                                <label>批次：</label>
                                <span>{{currentStudent.timestamp}}</span>
                            </div>
                            <div class="form-group">
                                <label>類型：</label>
                                <span>{{currentStudent.name}}</span>
                            </div>
                            <div class="form-group">
                                <label>課程時間：</label>
                                <span>{{currentStudent.name}}</span>
                            </div>
                            <div class="form-group">
                                <label>開課日期：</label>
                            </div>
                            <div class="form-group">
                                <label>課程狀態：</label>
                            </div>
                        </div>
                        <div class="right">
                            <div class="form-group">
                                <label>地點：</label>
                                <span>{{course.courseName_}}</span>
                            </div>
                            <div class="form-group">
                                <label>講師：</label>
                                <span>{{currentStudent.timestamp}}</span>
                            </div>
                            <div class="form-group">
                                <label>票種：</label>
                                <span>{{currentStudent.name}}</span>
                            </div>
                            <div class="form-group">
                                <label>票價：</label>
                                <span>{{currentStudent.name}}</span>
                            </div>
                            <div class="form-group">
                                <label>課程連結：</label>
                            </div>
                            <div class="form-group">
                                <label>副本收件人：</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="student-content">
                    <div class="content-title">學員資訊</div>
                    <table class="table table-hover">
                        <thead>
                            <th style="text-align: center;width:80px;">序號</th>
                            <th>學員名稱</th>
                            <th>公司</th>
                            <th>電話</th>
                            <th>電子郵件</th>
                            <th>繳費狀態</th>
                        </thead>
                        <tbody>
                            <tr ng-repeat="s in studentList track by $index" ng-class="{'selected': s.isSelected}" ng-click="toggleSelectStudent(s, $index, $event)" ng-show="studentList.length > 0">
                                <td style="text-align: center;">{{$index}}</td>
                                <td>{{s.name}}</td>
                                <td>{{s.company}}</td>
                                <td>{{s.phone}}</td>
                                <td>{{s.email}}</td>
                                <td>
                                    <button id="status-label" type="button" class="btn btn-default status-toggle" data-toggle="dropdown">
                                        <span>{{s.payment_status}}</span>
                                        <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="status-label">
                                        <li ng-click="changeStudentStatus(s, 0)"><a>免繳費</a></li>
                                        <li ng-click="changeStudentStatus(s, 1)"><a>未繳費</a></li>
                                        <li ng-click="changeStudentStatus(s, 2)"><a>課後再繳費</a></li>
                                        <li ng-click="changeStudentStatus(s, 3)"><a>已繳費</a></li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="7" ng-show="studentList.length == 0" class="empty">此課程尚未有學員資料</td>
                            </tr>
                        </tbody>
                    </table>                  
                </div>
            </div>
        </div>
    </div>   
</div>

<!-- Invoice Modal -->
<div class="modal fade" id="invoice-modal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
        <invoice-modal></invoice-modal>
    </div>
    	
	
</div>